Microsoft (R) Macro Assembler Version 5.00                  1/2/24 13:14:01
                                                             Page     1-1


       1				.386 
       2 0000				rozkazy SEGMENT use16 
       3						ASSUME	cs:rozkazy 
       4				 
       5 0000				linia PROC 
       6 0000  50				push	ax 
       7 0001  53				push	bx 
       8 0002  06				push	es 
       9				 
      10 0003  B8 A000				mov		ax, 0A000H 
      11 0006  8E C0				mov		es, ax 
      12				 
      13 0008  2E: 8B 1E 0041 R			mov		bx, cs:adres_pi
					ksela ; adres bie¿¹cego piksela  
      14 000D  2E: A0 0040 R			mov		al, cs:kolor 
      15 0011  26: 88 07			mov		es:[bx], al ; w
					pisanie kodu koloru do pamiêci ekranu 
      16				 
      17					; przejœcie do nastêpnego wiers
					za na ekranie 
      18 0014  81 C3 0141			add		bx, 320+1 
      19				 
      20					; sprawdzenie czy ca³a linia wy
					kreœlona 
      21 0018  81 FB FA00			cmp		bx, 320*200 
      22 001C  0F 82 0033 R			jb		dalej ; skok gd
					y linia jeszcze nie wykreœlona 
      23				 
      24					; kreœlenie linii zosta³o zakoñ
					czone - nastêpna linia bêdzie 
      25					; kreœlona w innym kolorze o 10
					 pikseli dalej 
      26 0020  2E: 83 06 0043 R 0A		add		word ptr cs:prz
					yrost, 10 
      27 0026  BB 000A				mov		bx, 10 
      28 0029  2E: 03 1E 0043 R			add		bx, cs:przyrost
					 
      29 002E  2E: FE 06 0040 R			inc		cs:kolor
						; kolejny kod koloru 
      30				 
      31					; zapisanie adresu bie¿¹cego pi
					ksela 
      32 0033				dalej: 
      33 0033  2E: 89 1E 0041 R			mov		cs:adres_piksel
					a, bx 
      34				 
      35 0038  07				pop		es 
      36 0039  5B				pop		bx 
      37 003A  58				pop		ax 
      38				 
      39 003B  2E: FF 2E 0045 R			jmp		dword ptr cs:we
					ktor8 
      40				 
      41					;zmienne 
Microsoft (R) Macro Assembler Version 5.00                  1/2/24 13:14:01
                                                             Page     1-2


      42 0040  01				kolor			db
						1 
      43 0041  000A				adres_piksela	dw	10 
      44 0043  0000				przyrost		dw
						0 
      45 0045  ????????				wektor8			dd
						? 
      46				 
      47				 
      48 0049				linia ENDP 
      49				 
      50 0049				zacznij: 
      51 0049  B4 00				mov		ah, 0 
      52 004B  B0 13				mov		al, 13h 
      53 004D  CD 10				int		10h 
      54				 
      55					; zapamiêtanie wektora numer 8 
      56 004F  BB 0000				mov		bx, 0 
      57 0052  8E C3				mov		es, bx	; zerow
					anie rejestru es 
      58 0054  26: 66| A1 0020			mov		eax, es:[32] ; 
					odczytanie wektora nr 8 
      59 0059  2E: 66| A3 0045 R		mov		cs:wektor8, eax
					 ; zapamienianie wektora 8 
      60				 
      61					; adres procedury 'linia' w pos
					taci segment:offset 
      62 005E  B8 ---- R			mov		ax, SEG linia 
      63 0061  BB 0000 R			mov		bx, OFFSET lini
					a 
      64				 
      65 0064  FA				cli 
      66				 
      67					; zapisanie adresu procedury 'l
					inia' do wektora nr 8 
      68 0065  26: 89 1E 0020			mov		es:[32], bx 
      69 006A  26: A3 0022			mov		es:[34], ax 
      70				 
      71 006E  FB				sti 
      72				 
      73 006F				czekaj: 
      74 006F  B4 01				mov		ah, 1 
      75 0071  CD 16				int		16h 
      76 0073  74 FA				jz		czekaj 
      77				 
      78 0075  B4 00				mov		ah, 0 
      79 0077  B0 03				mov		al, 3h 
      80 0079  CD 10				int		10h 
      81				 
      82					; odtworzenie oryginalnej warto
					œci wektora 8 
      83 007B  2E: 66| A1 0045 R		mov		eax, cs:wektor8
					 
      84 0080  26: 66| A3 0020			mov		es:[32], eax 
Microsoft (R) Macro Assembler Version 5.00                  1/2/24 13:14:01
                                                             Page     1-3


      85				 
      86					; zakoñczenie wykonywania 
      87 0085  B8 4C00				mov		ax, 4c00h 
      88 0088  CD 21				int		21h 
      89 008A				rozkazy ENDS 
      90				 
      91 0000				stosik	SEGMENT stack 
      92 0000  0100[				db	256	dup	(?) 
      93	    ??			
      94			 ]	
      95				
      96 0100				stosik	ENDS 
      97				 
      98				END zacznij 
Microsoft (R) Macro Assembler Version 5.00                  1/2/24 13:14:01
                                                             Symbols-1




                N a m e         	Size	Length	 Align	Combine Class

ROZKAZY  . . . . . . . . . . . .  	16 Bit	008A	PARA	NONE	
STOSIK . . . . . . . . . . . . .  	32 Bit	0100	PARA	STACK	

Symbols:            

                N a m e         	Type	 Value	 Attr

ADRES_PIKSELA  . . . . . . . . .  	L WORD	0041	ROZKAZY

CZEKAJ . . . . . . . . . . . . .  	L NEAR	006F	ROZKAZY

DALEJ  . . . . . . . . . . . . .  	L NEAR	0033	ROZKAZY

KOLOR  . . . . . . . . . . . . .  	L BYTE	0040	ROZKAZY

LINIA  . . . . . . . . . . . . .  	N PROC	0000	ROZKAZY	Length = 0049

PRZYROST . . . . . . . . . . . .  	L WORD	0043	ROZKAZY

WEKTOR8  . . . . . . . . . . . .  	L DWORD	0045	ROZKAZY

ZACZNIJ  . . . . . . . . . . . .  	L NEAR	0049	ROZKAZY

@FILENAME  . . . . . . . . . . .  	TEXT  linie		


     95 Source  Lines
     95 Total   Lines
     12 Symbols

  50522 + 466022 Bytes symbol space free

      0 Warning Errors
      0 Severe  Errors
